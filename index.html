<!DOCTYPE html>

<html>
    <head>
        <title>Rock Paper Scissors</title>
        <link rel="stylesheet" href="main.css" />
    </head>
    <body>
        <div id="container">
            <img id="img1" />
            <img id="img2" />
        </div>
        <button id="Rock" type="button">Rock</button>
        <button id="Paper" type="button">Paper</button>
        <button id="Scissors" type="button">Scissors</button>
        <div id="display">
            <p id="result">Start the game.</p>
            <span id="your-score">You: <b>0</b></span>
            <span id="comp-score">Computer: <b>0</b></span>
        </div>
        <script>
            let yourNum = 0;
            let compNum = 0;

            function computerPlay() {
                let choice = ['Rock', 'Paper', 'Scissors'];
                return choice[Math.floor(Math.random() * choice.length)];
            }

            function playRound(playerSelection, computerSelection) {

                const result = document.querySelector('p#result');
                const yourScore = document.querySelector('span#your-score > b');
                const compScore = document.querySelector('span#comp-score > b');

                if (playerSelection == computerSelection) {
                    result.textContent = "It's a tie!";
                }
                else if (playerSelection == "Rock" && computerSelection == "Scissors" ||
                    playerSelection == "Paper" && computerSelection == "Rock" ||
                    playerSelection == "Scissors" && computerSelection == "Paper") {
                        result.textContent = "You win! " + playerSelection + " beats " + computerSelection;
                        yourScore.textContent = ++yourNum;
                }
                else {
                    result.textContent = "You lose! " + computerSelection + " beats " + playerSelection;
                    compScore.textContent = ++compNum;
                }

                const dis = document.querySelector('div#display');
                const winner = document.createElement('p');
                if (yourNum == 5) {
                    winner.textContent = "Congratulations! You win the game.";
                    dis.appendChild(winner);
                }
                else if (compNum == 5) {
                    winner.textContent = "Sorry! Computer wins the game.";
                    dis.appendChild(winner);
                }
            }

            function display(playerSelection, computerSelection) {

                const img1 = document.querySelector('img#img1');
                const img2 = document.querySelector('img#img2');

                switch(playerSelection) {
                    case "Rock": img1.src = "rock.png"; break;
                    case "Paper": img1.src = "paper.png"; break;
                    case "Scissors": img1.src = "scissors.png"; break;
                }

                switch(computerSelection) {
                    case "Rock": img2.src = "rock.png"; break;
                    case "Paper": img2.src = "paper.png"; break;
                    case "Scissors": img2.src = "scissors.png"; break;
                }
            }

            function game() {

                const buttons = document.querySelectorAll('button');
                buttons.forEach((button) => {
                    button.addEventListener('click', () => {
                        let player = button.id;
                        let computer = computerPlay();
                        playRound(player, computer);
                        display(player, computer);
                    });
                });
            }

            game();
        </script>
    </body>
</html>